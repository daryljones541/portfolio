function getAlerts(){$.ajax({type:"post",url:"formFunctions.php",data:{getalerts:!0},dataType:"json",success:function(n){n[0].status=="set"&&alarm(n)}})}function alarm(n){var t="",r,i;if($.each(n,function(i){t+=n[i].time==""?'<tr id="a'+n[i].id+'"><td>'+n[i].date+"<\/td><td>"+n[i].description+"<\/td><\/tr>":'<tr id="a'+n[i].id+'"><td>'+n[i].date+" "+n[i].time+"<\/td><td>"+n[i].description+"<\/td><\/tr>"}),$("#alarmWindow").is(":visible")){r=$("#alarmBody").html().replace(' class="highlighted"',"");r!=t&&$("#alarmBody").html(t);return}if($("#alarmBody").html(t),$(".modal").is(":visible")){i=$(".modal:visible");i.modal("hide");$("#alarmWindow").on("hidden.bs.modal",function(){i.modal("show")})}else $("#alarmWindow").off();$("#alarmWindow").modal("show")}function getToDoList(){$.ajax({type:"post",url:"formFunctions.php",data:{gettasks:!0},dataType:"json",success:function(n){for(var i="",t=0;t<n.length;t++)i+='<tr><td id="toDo'+n[t].id+'">'+n[t].task+"<\/td><\/tr>";$("#toDoBody").html(i);$("#addTask").val("")}})}function reorderToDo(){var n=[],t=0;$("#toDoBody td").each(function(){n[t]=$(this).html();t++});$.ajax({type:"post",url:"formFunctions.php",data:{reordertasks:n},success:function(n){n=="success"||n=="error"&&$("#toDoMessage").html("There was a problem saving your list.")}})}function getAppointmentList(n){$("#appointmentMessage").html("");$.ajax({type:"post",url:"formFunctions.php",data:{appointment:!0},dataType:"json",success:function(t){for(var u,r="",i=0;i<t.length;i++)r+=t[i].active==1?'<tr class="display-event" ':"<tr ",r+='id="'+t[i].id+'"><td>'+t[i].date+" "+t[i].time,t[i].active==1&&(r+='<img id="Alarm set for '+t[i].reminder+'" src="../Images/Nuvola_apps_kalarm.png" alt="alarm" />'),r+="<\/td><td>"+t[i].description+"<\/td><\/tr>";$("#appointmentBody").html(r);n>-1&&($("#"+n).addClass("highlighted"),u=$("#appointmentBox").scrollTop()-$("#appointmentBox").offset().top+$("#"+n).offset().top-($("#appointmentBox").height()/2-$("#"+n).height()/2),$("#appointmentBox").animate({scrollTop:u},1e3));$(".display-event").mouseenter(function(){var n=$(this).children("td").children("img").attr("id");$("#appointmentMessage").html(n)}).mouseleave(function(){$("#appointmentMessage").html("&nbsp;")})}})}$(document).ready(function(){$("input:not(:button), textarea, select").focus(function(){$(".messageLabel").html("&nbsp;")});$("#new_file").on("change",function(n){$("#fileToUpload").html(n.target.files[0].name)});$("#uploadButton").click(function(){$(".messageLabel").html("&nbsp;");$("#fileToUpload").html()!="None selected"&&$("#uploadLoadingIcon").html('<img src="../Images/Loading_2_transparent.gif" alt="loading image" />')});$("#downloadForm").on("submit",function(n){var i,t,r;$(".messageLabel").html("&nbsp;");i=$("#filename option:selected").val();t="";i=="resume"?t="../Images/MyResume.PDF":i=="picture"?t="../Images/Daryl Jones.PNG":i=="upload"&&(t="<?php echo $_SESSION['image']; ?>");t!=""?(r=new XMLHttpRequest,r.open("HEAD",t,!1),r.send(),r.status==404&&($("#downloadMessage").html("There was a problem reading the file."),n.preventDefault())):($("#downloadMessage").html("Please select a file."),n.preventDefault())});$("#appointmentDate").datepicker();$("#deleteAppointmentButton").click(function(){$(".messageLabel").html("&nbsp;");var n=$("#appointmentBody tr.highlighted").attr("id");n!=null?$.ajax({type:"post",url:"formFunctions.php",data:{appointid:n},success:function(t){t=="success"?$("#"+n).remove():$("#appointmentMessage").html("There was a problem deleting your appointment.")}}):$("#appointmentMessage").html("Click on an event to highlight it first.")});$("#dismissAlarmButton").click(function(){var n,t;$(".messageLabel").html("&nbsp;");n=$("#alarmBody tr.highlighted").attr("id");n!=null?(t=n.substr(1,n.length),$.ajax({type:"post",url:"formFunctions.php",data:{dismissalarm:!0,id:t},success:function(i){i=="success"&&($("#"+n).remove(),$("#"+t).removeClass("display-event"),$("#"+t).children("td").children("img").remove())}})):$("#snoozeMessage").html("Click on an event to highlight it first.")});$("#snoozeButton").click(function(){var n,t,i;$(".messageLabel").html("&nbsp;");n=$("#alarmBody tr.highlighted").attr("id");n!=null?(t=n.substr(1,n.length),i=$("#snooze option:selected").val(),$.ajax({type:"post",url:"formFunctions.php",data:{snooze:i,id:t},success:function(t){t=="success"&&$("#"+n).remove()}})):$("#snoozeMessage").html("Click on an event to highlight it first.")});$("#editAppointmentButton").click(function(){$(".messageLabel").html("&nbsp;");var n=$("#appointmentBody tr.highlighted").attr("id");n!=null?$.ajax({type:"post",url:"formFunctions.php",data:{editappointment:!0,id:n},dataType:"json",success:function(n){n.status=="success"?($("#appointmentDate").val(n.date),$("#appointmentDescripion").val(n.description),n.time!=-1?$("#appointmentTime").removeClass("placeholder"):$("#appointmentTime").addClass("placeholder"),$("#appointmentTime").val(n.time),n.reminder!=-1?$("#appointmentReminder").removeClass("placeholder"):$("#appointmentReminder").addClass("placeholder"),$("#appointmentReminder").val(n.reminder),$("#appointmentModalTitle").html("Edit Appointment"),$("#appointmentId").val(n.id),$("#addAppointmentTable").modal("show")):$("#addAppointmentMessage").html("There was a problem saving your edit.")}}):$("#appointmentMessage").html("Click on an event to highlight it first.")});$("#addAppointmentButton").click(function(){$(".messageLabel").html("&nbsp;");$("#appointmentModalTitle").html("Add Appointment");$("#appointmentDate").val("");$("#appointmentDescripion").val("");$("#appointmentTime").val("-1");$("#appointmentReminder").val("-1");$("#appointmentReminder").addClass("placeholder");$("#appointmentTime").addClass("placeholder");$("#appointmentId").val("");$("#addAppointmentTable").modal("show")});$("#closeAddAppointmentButton").click(function(){$("#addAppointmentTable").modal("hide")});$("#saveAppointmentButton").click(function(){$(".messageLabel").html("&nbsp;");var t=$("#appointmentDate").val(),i=$("#appointmentDescripion").val(),n="";if(t==""&&(n+="Date is required. "),i==""&&(n+="What's Happening is required."),n==""){var u=$("#appointmentTime option:selected").val(),f=$("#appointmentReminder option:selected").val(),r=$("#appointmentId").val();r==""?$.ajax({type:"post",url:"formFunctions.php",data:{date:t,time:u,reminder:f,description:i},dataType:"json",success:function(n){n.status=="success"?($("#addAppointmentTable").modal("hide"),getAppointmentList(n.id)):$("#addAppointmentMessage").html("There was a problem saving your appointment.")}}):$.ajax({type:"post",url:"formFunctions.php",data:{id:r,date:t,time:u,reminder:f,description:i},success:function(){$("#addAppointmentTable").modal("hide");getAppointmentList(r)}})}else $("#addAppointmentMessage").html(n)});$("select.placeholder").on("change",function(){$(this).val()=="none"?$(this).addClass("placeholder"):$(this).removeClass("placeholder")});$("#registerButton").click(function(){$(".messageLabel").html("&nbsp;");var n="",t=$("#username").val(),i=$("#password").val(),r=$("#confirmPassword").val();t==""&&(n+="Username is required. ");i==""&&(n+="Password is required. ");r==""&&(n+="Re-Enter password is required. ");i!=r&&(n+="The passwords do not match.");n==""?$.ajax({type:"post",url:"formFunctions.php",data:{mode:"register",username:t,password:i},success:function(n){n=="exists"?$("#loginMessage").html("Username already taken.  Please choose another."):n=="created"?($("#registerMessage").html("User account created successfully."),$("#welcomeUser").html(t),$(".loggedOut").slideUp("slow",function(){$(".loggedIn").slideDown("slow")})):$("#loginMessage").html("There was a problem creating your account.")}}):$("#loginMessage").html(n)});$("#loginButton").click(function(){$(".messageLabel").html("&nbsp;");var n=$("#username").val(),t=$("#password").val();$.ajax({type:"post",url:"formFunctions.php",data:{mode:"login",username:n,password:t},success:function(t){t=="none"?$("#loginMessage").html("Incorrect username or password.  Please try again."):t=="loggedin"?(getToDoList(),getAppointmentList(-1),$("#welcomeUser").html(n),$(".loggedOut").slideUp("slow",function(){$(".loggedIn").slideDown("slow")}),checkTime=setInterval(function(){getAlerts()},3e5),getAlerts()):t=="fail"?$("#loginMessage").html("There was a problem connecting to the server."):$("#loginMessage").html(t)}})});$("#logoutButton").click(function(){$(".messageLabel").html("&nbsp;");$.ajax({type:"post",url:"formFunctions.php",data:{logout:"yes"},success:function(){$(".loggedIn").slideUp("slow",function(){$(".loggedOut").slideDown("slow")});$(".register").slideUp("slow",function(){$(".login").slideDown("slow")});$("#register-text").hide();$("#login-text").show();clearInterval(checkTime)}})});$("#new-user-link").click(function(){$(".messageLabel").html("&nbsp;");$(".login").slideUp("slow",function(){$(".register").slideDown("slow")});$("#register-text").show();$("#login-text").hide()});$("#exist-user-link").click(function(){$(".messageLabel").html("&nbsp;");$(".register").slideUp("slow",function(){$(".login").slideDown("slow")});$("#register-text").hide();$("#login-text").show()});$("#alarmBody").on("click","tr",function(){$(".messageLabel").html("&nbsp;");$("#alarmBody tr").removeClass("highlighted");$(this).addClass("highlighted")});$("#alarmWindow").click(function(n){$(n.target).closest("#alarmBody tr").length||$("#alarmBody tr").removeClass("highlighted")});$("#appointmentBody").on("click","tr",function(){$(".messageLabel").html("&nbsp;");$("#appointmentBody tr").removeClass("highlighted");$(this).addClass("highlighted")});$(document).click(function(n){$(n.target).closest("#appointmentBody tr").length||$("#appointmentBody tr").removeClass("highlighted")});$("#toDoBody").on("click","td",function(){$(".messageLabel").html("&nbsp;");$("#toDoBody td").removeClass("highlighted");$(this).addClass("highlighted")});$(document).click(function(n){$(n.target).closest("#toDoBody td").length||$("#toDoBody td").removeClass("highlighted")});$("#toDoBody").sortable({update:function(){$(".messageLabel").html("&nbsp;");reorderToDo()}});$("#addTaskButton").click(function(){$(".messageLabel").html("&nbsp;");var n=$("#addTask").val();n!=""?$.ajax({type:"post",url:"formFunctions.php",data:{addtask:n},success:function(t){$("#toDoBody").append('<tr><td id="toDo'+t+'">'+n+"<\/td><\/tr>");$("#addTask").val("");$("#toDoBox").animate({scrollTop:$("#toDoBox").prop("scrollHeight")},1e3)}}):$("#toDoMessage").html("Enter your new task in the field below.")});$("#deleteTaskButton").click(function(){var n,t,i;$(".messageLabel").html("&nbsp;");n=$("#toDoBody td.highlighted");t=n.attr("id");t!=null?(i=t.substr(4),$.ajax({type:"post",url:"formFunctions.php",data:{deletetask:i},success:function(){n.remove();$("#addTask").val("")}})):$("#toDoMessage").html("Click on a task to highlight it first.")});$("#editTaskButton").click(function(){var n,t,i;$(".messageLabel").html("&nbsp;");n=$("#toDoBody td.highlighted");t=n.attr("id");t!=null?(i=t.substr(4),$("#editTaskText").val(n.html()),$("#editTaskObject").val(i),$("#editTaskModal").modal("show")):$("#toDoMessage").html("Click on a task to highlight it first.")});$("#saveEditTaskButton").click(function(){var n=$("#editTaskText").val(),t=$("#editTaskObject").val();$.ajax({type:"post",url:"formFunctions.php",data:{updatetask:t,task:n},success:function(){$("#toDo"+t).html(n);$("#editTaskModal").modal("hide")}})});$("#feedbackdate").datepicker();$("#custExperience").on("submit",function(n){$(".messageLabel").html("&nbsp;");n.preventDefault();$.ajax({type:"post",url:"formFunctions.php",data:$("#custExperience").serialize(),success:function(n){n=="true"?($("#feedbackMessage").html(n),$("#feedbackMessage").html("Your information was saved."),$("#custExperience")[0].reset()):$("#feedbackMessage").html(n)}})});$("#feedbackViewAll").click(function(){$(".messageLabel").html("&nbsp;");$.ajax({type:"post",url:"formFunctions.php",data:{feedbackList:"get"},dataType:"json",success:function(n){var i,t;if(n!="empty")for(i="",t=0;t<n.length;t++){var r=n[t].date,u=n[t].store,f=n[t].easy,e=n[t].staff,o=n[t].service,s=n[t].comments;i+="<tr><td>"+r+"<\/td><td>"+u+"<\/td><td>"+f+"<\/td><td>"+e+"<\/td><td>"+o+"<\/td><td>"+s+"<\/td><\/tr>"}else i="";$("#feedbackBody").html(i)}});$("#feedbackTable").modal("show")})});